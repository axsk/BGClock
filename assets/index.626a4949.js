(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function q(){}function be(e){return e()}function ce(){return Object.create(null)}function D(e){e.forEach(be)}function ve(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Se(e){return Object.keys(e).length===0}function we(e,...t){if(e==null)return q;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Ne(e){let t;return we(e,i=>t=i)(),t}function ye(e,t,i){e.$$.on_destroy.push(we(t,i))}function fe(e){return e==null?"":e}function N(e,t,i){return e.set(i),t}function h(e,t){e.appendChild(t)}function A(e,t,i){e.insertBefore(t,i||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function Ce(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function y(e){return document.createElement(e)}function Le(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e){return document.createTextNode(e)}function T(){return B(" ")}function P(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function k(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function H(e){return e===""?null:+e}function Me(e){return Array.from(e.childNodes)}function ee(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function j(e,t){e.value=t==null?"":t}function L(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}class Oe{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Le(i.nodeName):this.e=y(i.nodeName),this.t=i,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)A(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(M)}}let se;function U(e){se=e}function ae(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const R=[],te=[],Q=[],de=[],Ae=Promise.resolve();let ne=!1;function Pe(){ne||(ne=!0,Ae.then(ke))}function ie(e){Q.push(e)}const Z=new Set;let G=0;function ke(){const e=se;do{for(;G<R.length;){const t=R[G];G++,U(t),Te(t.$$)}for(U(null),R.length=0,G=0;te.length;)te.pop()();for(let t=0;t<Q.length;t+=1){const i=Q[t];Z.has(i)||(Z.add(i),i())}Q.length=0}while(R.length);for(;de.length;)de.pop()();ne=!1,Z.clear(),U(e)}function Te(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}const W=new Set;let F;function je(){F={r:0,c:[],p:F}}function Be(){F.r||D(F.c),F=F.p}function K(e,t){e&&e.i&&(W.delete(e),e.i(t))}function X(e,t,i,s){if(e&&e.o){if(W.has(e))return;W.add(e),F.c.push(()=>{W.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function $e(e){e&&e.c()}function le(e,t,i,s){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,i),s||ie(()=>{const r=e.$$.on_mount.map(be).filter(ve);e.$$.on_destroy?e.$$.on_destroy.push(...r):D(r),e.$$.on_mount=[]}),o.forEach(ie)}function re(e,t){const i=e.$$;i.fragment!==null&&(D(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ie(e,t){e.$$.dirty[0]===-1&&(R.push(e),Pe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,i,s,n,o,r,a=[-1]){const m=se;U(e);const l=e.$$={fragment:null,ctx:[],props:o,update:q,not_equal:n,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:ce(),dirty:a,skip_bound:!1,root:t.target||m.$$.root};r&&r(l.root);let p=!1;if(l.ctx=i?i(e,t.props||{},(f,$,...E)=>{const S=E.length?E[0]:$;return l.ctx&&n(l.ctx[f],l.ctx[f]=S)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](S),p&&Ie(e,f)),$}):[],l.update(),p=!0,D(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const f=Me(t.target);l.fragment&&l.fragment.l(f),f.forEach(M)}else l.fragment&&l.fragment.c();t.intro&&K(e.$$.fragment),le(e,t.target,t.anchor,t.customElement),ke()}U(m)}class ue{$destroy(){re(this,1),this.$destroy=q}$on(t,i){if(!ve(i))return q;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Se(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J=[];function qe(e,t=q){let i;const s=new Set;function n(a){if(Y(e,a)&&(e=a,i)){const m=!J.length;for(const l of s)l[1](),J.push(l,e);if(m){for(let l=0;l<J.length;l+=2)J[l][0](J[l+1]);J.length=0}}}function o(a){n(a(e))}function r(a,m=q){const l=[a,m];return s.add(l),s.size===1&&(i=t(n)||q),a(e),()=>{s.delete(l),s.size===0&&(i(),i=null)}}return{set:n,update:o,subscribe:r}}var x={};function Ee(e,t,i){const s=typeof localStorage<"u"&&typeof window<"u",n=(i==null?void 0:i.serializer)||JSON;function o(r,a){!s||localStorage.setItem(r,n.stringify(a))}if(!x[e]){const r=qe(t,l=>{const p=s?localStorage.getItem(e):null;if(p&&l(n.parse(p)),s){const f=$=>{$.key===e&&l($.newValue?n.parse($.newValue):null)};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)}}),{subscribe:a,set:m}=r;x[e]={set(l){o(e,l),m(l)},update(l){const p=l(Ne(r));o(e,p),m(p)},subscribe:a}}return x[e]}function ze(e){let t,i,s;return{c(){t=y("input"),k(t,"class","w3-input svelte-c42o1v"),L(t,"color","black"),L(t,"pointer-events","none")},m(n,o){A(n,t,o),j(t,e[1].name),i||(s=P(t,"input",e[17]),i=!0)},p(n,o){o&2&&t.value!==n[1].name&&j(t,n[1].name)},d(n){n&&M(t),i=!1,s()}}}function He(e){let t,i,s;return{c(){t=y("input"),k(t,"class","w3-input svelte-c42o1v"),L(t,"color","black")},m(n,o){A(n,t,o),j(t,e[1].name),i||(s=P(t,"input",e[16]),i=!0)},p(n,o){o&2&&t.value!==n[1].name&&j(t,n[1].name)},d(n){n&&M(t),i=!1,s()}}}function pe(e){let t=V(e[1].bronstein)+"",i;return{c(){i=B(t)},m(s,n){A(s,i,n)},p(s,n){n&2&&t!==(t=V(s[1].bronstein)+"")&&ee(i,t)},d(s){s&&M(i)}}}function he(e){let t,i,s;return{c(){t=B("("),i=new Oe(!1),s=B(")"),i.a=s},m(n,o){A(n,t,o),i.m(e[2],n,o),A(n,s,o)},p(n,o){o&4&&i.p(n[2])},d(n){n&&M(t),n&&i.d(),n&&M(s)}}}function De(e){let t,i,s,n,o=V(e[1].seconds)+"",r,a,m,l,p,f=e[1].moves+"",$,E,S,C,w=V(e[1].totaltime)+"",g,O,v;function z(_,I){return _[0]?He:ze}let d=z(e),b=d(e),u=e[1].bronstein>0&&pe(e),c=e[1].moves>0&&he(e);return{c(){t=y("div"),b.c(),i=T(),s=y("div"),n=y("div"),r=B(o),a=T(),m=y("div"),u&&u.c(),l=T(),p=y("div"),$=B(f),E=T(),c&&c.c(),S=T(),C=y("div"),L(m,"color","gray"),k(n,"class",""),L(n,"position","absolute"),L(n,"left","50%"),L(n,"transform","translate(-50%)"),L(n,"text-align","right"),k(s,"class","time svelte-c42o1v"),k(p,"class","w3-display-bottomleft w3-padding"),k(C,"class","w3-display-bottomright w3-padding"),k(t,"id","square"),k(t,"class",g=fe(e[1].running?"running":"")+" svelte-c42o1v")},m(_,I){A(_,t,I),b.m(t,null),h(t,i),h(t,s),h(s,n),h(n,r),h(n,a),h(n,m),u&&u.m(m,null),h(t,l),h(t,p),h(p,$),h(p,E),c&&c.m(p,null),h(t,S),h(t,C),C.innerHTML=w,O||(v=[P(t,"click",e[14]),P(t,"keydown",e[15])],O=!0)},p(_,[I]){d===(d=z(_))&&b?b.p(_,I):(b.d(1),b=d(_),b&&(b.c(),b.m(t,i))),I&2&&o!==(o=V(_[1].seconds)+"")&&ee(r,o),_[1].bronstein>0?u?u.p(_,I):(u=pe(_),u.c(),u.m(m,null)):u&&(u.d(1),u=null),I&2&&f!==(f=_[1].moves+"")&&ee($,f),_[1].moves>0?c?c.p(_,I):(c=he(_),c.c(),c.m(p,null)):c&&(c.d(1),c=null),I&2&&w!==(w=V(_[1].totaltime)+"")&&(C.innerHTML=w),I&2&&g!==(g=fe(_[1].running?"running":"")+" svelte-c42o1v")&&k(t,"class",g)},i:q,o:q,d(_){_&&M(t),b.d(),u&&u.d(),c&&c.d(),O=!1,D(v)}}}function V(e){let t="";e<0&&(t+="-"),e=Math.abs(e);let i=Math.floor(e/(60*60)),s=Math.floor(e/60%60),n=Math.floor(e%60);return i>0&&(t+=i+":",s<10&&(t+="0")),s>0&&(t+=s+":",n<10&&(t+="0")),t+=n,t}function Fe(e,t,i){let s,n,{id:o=0}=t,{config:r={basetime:5,fischer:5,bronstein:5}}=t,{editable:a=!1}=t;const m={seconds:r.basetime,running:!1,bronstein:r.bronstein,checkpoint:0,moves:0,totaltime:0,name:"Player"};let l=Ee("clockstate-"+o,m);ye(e,l,u=>i(1,n=u)),setInterval(E,100);function p(){return n.running}function f(){return n}function $(u){N(l,n=u,n)}function E(){if(n.running){let u=Date.now(),c=(u-n.checkpoint)/1e3;N(l,n.checkpoint=u,n),N(l,n.totaltime+=c,n),n.bronstein-c>0?N(l,n.bronstein-=c,n):(N(l,n.seconds-=c-n.bronstein,n),N(l,n.bronstein=0,n))}}function S(){g(),N(l,n.bronstein=r.bronstein,n)}function C(){w(),N(l,n.seconds+=r.fischer,n),N(l,n.moves+=1,n)}function w(){E(),N(l,n.running=!1,n)}function g(){N(l,n.checkpoint=Date.now(),n),N(l,n.running=!0,n)}function O(){N(l,n.seconds=r.basetime,n),N(l,n.running=!1,n),N(l,n.bronstein=r.bronstein,n),N(l,n.moves=0,n),N(l,n.totaltime=0,n)}function v(u){ae.call(this,e,u)}function z(u){ae.call(this,e,u)}function d(){n.name=this.value,l.set(n)}function b(){n.name=this.value,l.set(n)}return e.$$set=u=>{"id"in u&&i(4,o=u.id),"config"in u&&i(5,r=u.config),"editable"in u&&i(0,a=u.editable)},e.$$.update=()=>{e.$$.dirty&2&&i(2,s=V(n.totaltime/n.moves))},[a,n,s,l,o,r,p,f,$,S,C,w,g,O,v,z,d,b]}class Ve extends ue{constructor(t){super(),oe(this,t,Fe,De,Y,{id:4,config:5,editable:0,isrunning:6,getstate:7,setstate:8,start:9,stop:10,pause:11,unpause:12,reset:13})}get isrunning(){return this.$$.ctx[6]}get getstate(){return this.$$.ctx[7]}get setstate(){return this.$$.ctx[8]}get start(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get pause(){return this.$$.ctx[11]}get unpause(){return this.$$.ctx[12]}get reset(){return this.$$.ctx[13]}}function me(e,t,i){const s=e.slice();return s[21]=t[i],s[22]=t,s[23]=i,s}function _e(e){let t,i,s,n,o,r,a,m,l,p,f,$,E,S,C;return{c(){t=y("div"),i=B("Players "),s=y("input"),n=B(`
            Basis `),o=y("input"),r=B(`
            Bronstein `),a=y("input"),m=B(`
            Fischer `),l=y("input"),p=B(`
            
            Fixed order`),f=y("input"),$=T(),E=y("button"),E.textContent="RESET",k(s,"type","number"),k(o,"type","number"),k(a,"type","number"),k(l,"type","number"),k(f,"type","checkbox"),k(E,"class","w3-button"),k(t,"class","")},m(w,g){A(w,t,g),h(t,i),h(t,s),j(s,e[0].players),h(t,n),h(t,o),j(o,e[0].basetime),h(t,r),h(t,a),j(a,e[0].bronstein),h(t,m),h(t,l),j(l,e[0].fischer),h(t,p),h(t,f),f.checked=e[0].ordered,h(t,$),h(t,E),S||(C=[P(s,"input",e[10]),P(o,"input",e[11]),P(a,"input",e[12]),P(l,"input",e[13]),P(f,"change",e[14]),P(E,"click",e[8])],S=!0)},p(w,g){g&1&&H(s.value)!==w[0].players&&j(s,w[0].players),g&1&&H(o.value)!==w[0].basetime&&j(o,w[0].basetime),g&1&&H(a.value)!==w[0].bronstein&&j(a,w[0].bronstein),g&1&&H(l.value)!==w[0].fischer&&j(l,w[0].fischer),g&1&&(f.checked=w[0].ordered)},d(w){w&&M(t),S=!1,D(C)}}}function ge(e){let t,i,s=e[21],n,o;const r=()=>e[15](i,s),a=()=>e[15](null,s);function m(){return e[16](e[21])}let l={id:e[21],config:e[0],editable:e[1]};return i=new Ve({props:l}),r(),i.$on("click",m),{c(){t=y("div"),$e(i.$$.fragment),n=T(),k(t,"class","w3-sand w3-border w3-padding w3-margin w3-round-large watch svelte-7y4jb0")},m(p,f){A(p,t,f),le(i,t,null),h(t,n),o=!0},p(p,f){e=p,s!==e[21]&&(a(),s=e[21],r());const $={};f&8&&($.id=e[21]),f&1&&($.config=e[0]),f&2&&($.editable=e[1]),i.$set($)},i(p){o||(K(i.$$.fragment,p),o=!0)},o(p){X(i.$$.fragment,p),o=!1},d(p){p&&M(t),a(),re(i)}}}function Je(e){let t,i,s,n,o,r,a,m,l,p,f,$,E,S,C,w,g=e[1]&&_e(e),O=e[3],v=[];for(let d=0;d<O.length;d+=1)v[d]=ge(me(e,O,d));const z=d=>X(v[d],1,1,()=>{v[d]=null});return{c(){t=y("link"),i=T(),s=y("div"),n=y("div"),o=B("Settings "),r=y("input"),a=T(),g&&g.c(),m=T(),l=y("button"),l.textContent="||",p=T(),f=y("button"),f.textContent="UNDO",$=T(),E=y("div");for(let d=0;d<v.length;d+=1)v[d].c();k(t,"rel","stylesheet"),k(t,"href","https://www.w3schools.com/w3css/4/w3.css"),k(r,"type","checkbox"),k(l,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),k(l,"style",""),k(f,"class","w3-button"),k(n,"class",""),L(E,"position","absolute"),L(E,"width","100%"),L(E,"left","0"),L(s,"position","absolute"),L(s,"width","100%"),L(s,"height","100%"),L(s,"left","0"),L(s,"top","0")},m(d,b){A(d,t,b),A(d,i,b),A(d,s,b),h(s,n),h(n,o),h(n,r),r.checked=e[1],h(n,a),g&&g.m(n,null),h(n,m),h(n,l),h(n,p),h(n,f),h(s,$),h(s,E);for(let u=0;u<v.length;u+=1)v[u].m(E,null);S=!0,C||(w=[P(r,"change",e[9]),P(l,"click",e[7]),P(f,"click",e[5])],C=!0)},p(d,[b]){if(b&2&&(r.checked=d[1]),d[1]?g?g.p(d,b):(g=_e(d),g.c(),g.m(n,m)):g&&(g.d(1),g=null),b&79){O=d[3];let u;for(u=0;u<O.length;u+=1){const c=me(d,O,u);v[u]?(v[u].p(c,b),K(v[u],1)):(v[u]=ge(c),v[u].c(),K(v[u],1),v[u].m(E,null))}for(je(),u=O.length;u<v.length;u+=1)z(u);Be()}},i(d){if(!S){for(let b=0;b<O.length;b+=1)K(v[b]);S=!0}},o(d){v=v.filter(Boolean);for(let b=0;b<v.length;b+=1)X(v[b]);S=!1},d(d){d&&M(t),d&&M(i),d&&M(s),g&&g.d(),Ce(v,d),C=!1,D(w)}}}function Ke(e,t,i){let s,n,o=!1,r=[],a=[],m=[0,1,4,2,3];const l=[[0],[1,0],[1,2,0],[1,3,0,2],[0,1,3,4,2],[0,1,3,5,4,2],[0,1,3,5,6,4,2],[0,1,3,5,7,6,4,2]];let f=Ee("config",{players:2,bronstein:5,fischer:5,basetime:10,ordered:!0});ye(e,f,c=>i(0,s=c));function $(){if(a.length==0)return;let c=a.pop();for(let _ in c)r[_].setstate(c[_])}function E(c){if(!o)if(a.push(structuredClone(r.map(_=>_.getstate()))),r.every(_=>_.isrunning()==!1))r[c].start(),n=void 0;else if(s.ordered&&r[c].isrunning()){r[c].stop();let _=l[s.players-1][c];r[_].start()}else if(!s.ordered&&!r[c].isrunning()){for(let _ in m)r[_].isrunning()&&r[_].stop();r[c].start()}else!s.ordered&&r[c].isrunning()&&r[c].stop()}function S(){if(a.push(structuredClone(r.map(c=>c.getstate()))),n===void 0)for(let c in m)r[c].isrunning()&&(n=c),r[c].pause();else r.every(c=>!c.isrunning())&&r[n].unpause(),n=void 0}function C(){for(let c in m)r[c].reset();n=void 0}function w(){o=this.checked,i(1,o)}function g(){s.players=H(this.value),f.set(s)}function O(){s.basetime=H(this.value),f.set(s)}function v(){s.bronstein=H(this.value),f.set(s)}function z(){s.fischer=H(this.value),f.set(s)}function d(){s.ordered=this.checked,f.set(s)}function b(c,_){te[c?"unshift":"push"](()=>{r[_]=c,i(2,r)})}const u=c=>E(c);return e.$$.update=()=>{e.$$.dirty&1&&i(3,m=[...Array(s.players).keys()])},[s,o,r,m,f,$,E,S,C,w,g,O,v,z,d,b,u]}class Re extends ue{constructor(t){super(),oe(this,t,Ke,Je,Y,{})}}function Ue(e){let t,i,s,n,o;return n=new Re({}),{c(){t=y("meta"),i=T(),s=y("main"),$e(n.$$.fragment),k(t,"name","viewport"),k(t,"content","width=device-width, initial-scale=1")},m(r,a){A(r,t,a),A(r,i,a),A(r,s,a),le(n,s,null),o=!0},p:q,i(r){o||(K(n.$$.fragment,r),o=!0)},o(r){X(n.$$.fragment,r),o=!1},d(r){r&&M(t),r&&M(i),r&&M(s),re(n)}}}class Ge extends ue{constructor(t){super(),oe(this,t,null,Ue,Y,{})}}new Ge({target:document.getElementById("app")});

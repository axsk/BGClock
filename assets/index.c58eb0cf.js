(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerpolicy&&(u.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?u.credentials="include":n.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(n){if(n.ep)return;n.ep=!0;const u=i(n);fetch(n.href,u)}})();function q(){}function be(e){return e()}function fe(){return Object.create(null)}function D(e){e.forEach(be)}function ve(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Se(e){return Object.keys(e).length===0}function we(e,...t){if(e==null)return q;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Ne(e){let t;return we(e,i=>t=i)(),t}function ye(e,t,i){e.$$.on_destroy.push(we(t,i))}function ce(e){return e==null?"":e}function N(e,t,i){return e.set(i),t}function m(e,t){e.appendChild(t)}function A(e,t,i){e.insertBefore(t,i||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function Le(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function y(e){return document.createElement(e)}function Ce(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e){return document.createTextNode(e)}function j(){return B(" ")}function T(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function k(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function H(e){return e===""?null:+e}function Me(e){return Array.from(e.childNodes)}function ee(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function P(e,t){e.value=t==null?"":t}function C(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}class Oe{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Ce(i.nodeName):this.e=y(i.nodeName),this.t=i,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)A(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(M)}}let se;function U(e){se=e}function ae(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const R=[],te=[],Q=[],de=[],Ae=Promise.resolve();let ne=!1;function Te(){ne||(ne=!0,Ae.then(ke))}function ie(e){Q.push(e)}const Z=new Set;let G=0;function ke(){const e=se;do{for(;G<R.length;){const t=R[G];G++,U(t),je(t.$$)}for(U(null),R.length=0,G=0;te.length;)te.pop()();for(let t=0;t<Q.length;t+=1){const i=Q[t];Z.has(i)||(Z.add(i),i())}Q.length=0}while(R.length);for(;de.length;)de.pop()();ne=!1,Z.clear(),U(e)}function je(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}const W=new Set;let F;function Pe(){F={r:0,c:[],p:F}}function Be(){F.r||D(F.c),F=F.p}function K(e,t){e&&e.i&&(W.delete(e),e.i(t))}function X(e,t,i,s){if(e&&e.o){if(W.has(e))return;W.add(e),F.c.push(()=>{W.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function $e(e){e&&e.c()}function le(e,t,i,s){const{fragment:n,after_update:u}=e.$$;n&&n.m(t,i),s||ie(()=>{const o=e.$$.on_mount.map(be).filter(ve);e.$$.on_destroy?e.$$.on_destroy.push(...o):D(o),e.$$.on_mount=[]}),u.forEach(ie)}function re(e,t){const i=e.$$;i.fragment!==null&&(D(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ie(e,t){e.$$.dirty[0]===-1&&(R.push(e),Te(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,i,s,n,u,o,c=[-1]){const p=se;U(e);const l=e.$$={fragment:null,ctx:[],props:u,update:q,not_equal:n,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:fe(),dirty:c,skip_bound:!1,root:t.target||p.$$.root};o&&o(l.root);let f=!1;if(l.ctx=i?i(e,t.props||{},(a,v,...$)=>{const S=$.length?$[0]:v;return l.ctx&&n(l.ctx[a],l.ctx[a]=S)&&(!l.skip_bound&&l.bound[a]&&l.bound[a](S),f&&Ie(e,a)),v}):[],l.update(),f=!0,D(l.before_update),l.fragment=s?s(l.ctx):!1,t.target){if(t.hydrate){const a=Me(t.target);l.fragment&&l.fragment.l(a),a.forEach(M)}else l.fragment&&l.fragment.c();t.intro&&K(e.$$.fragment),le(e,t.target,t.anchor,t.customElement),ke()}U(p)}class ue{$destroy(){re(this,1),this.$destroy=q}$on(t,i){if(!ve(i))return q;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Se(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J=[];function qe(e,t=q){let i;const s=new Set;function n(c){if(Y(e,c)&&(e=c,i)){const p=!J.length;for(const l of s)l[1](),J.push(l,e);if(p){for(let l=0;l<J.length;l+=2)J[l][0](J[l+1]);J.length=0}}}function u(c){n(c(e))}function o(c,p=q){const l=[c,p];return s.add(l),s.size===1&&(i=t(n)||q),c(e),()=>{s.delete(l),s.size===0&&(i(),i=null)}}return{set:n,update:u,subscribe:o}}var x={};function Ee(e,t,i){const s=typeof localStorage<"u"&&typeof window<"u",n=(i==null?void 0:i.serializer)||JSON;function u(o,c){!s||localStorage.setItem(o,n.stringify(c))}if(!x[e]){const o=qe(t,l=>{const f=s?localStorage.getItem(e):null;if(f&&l(n.parse(f)),s){const a=v=>{v.key===e&&l(v.newValue?n.parse(v.newValue):null)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)}}),{subscribe:c,set:p}=o;x[e]={set(l){u(e,l),p(l)},update(l){const f=l(Ne(o));u(e,f),p(f)},subscribe:c}}return x[e]}function ze(e){let t,i,s;return{c(){t=y("input"),k(t,"class","w3-input svelte-c42o1v"),C(t,"color","black"),C(t,"pointer-events","none")},m(n,u){A(n,t,u),P(t,e[1].name),i||(s=T(t,"input",e[17]),i=!0)},p(n,u){u&2&&t.value!==n[1].name&&P(t,n[1].name)},d(n){n&&M(t),i=!1,s()}}}function He(e){let t,i,s;return{c(){t=y("input"),k(t,"class","w3-input svelte-c42o1v"),C(t,"color","black")},m(n,u){A(n,t,u),P(t,e[1].name),i||(s=T(t,"input",e[16]),i=!0)},p(n,u){u&2&&t.value!==n[1].name&&P(t,n[1].name)},d(n){n&&M(t),i=!1,s()}}}function he(e){let t=V(e[1].bronstein)+"",i;return{c(){i=B(t)},m(s,n){A(s,i,n)},p(s,n){n&2&&t!==(t=V(s[1].bronstein)+"")&&ee(i,t)},d(s){s&&M(i)}}}function pe(e){let t,i,s;return{c(){t=B("("),i=new Oe(!1),s=B(")"),i.a=s},m(n,u){A(n,t,u),i.m(e[2],n,u),A(n,s,u)},p(n,u){u&4&&i.p(n[2])},d(n){n&&M(t),n&&i.d(),n&&M(s)}}}function De(e){let t,i,s,n,u=V(e[1].seconds)+"",o,c,p,l,f,a=e[1].moves+"",v,$,S,L,w=V(e[1].totaltime)+"",_,O,b;function z(E,I){return E[0]?He:ze}let d=z(e),g=d(e),r=e[1].bronstein>0&&he(e),h=e[1].moves>0&&pe(e);return{c(){t=y("div"),g.c(),i=j(),s=y("div"),n=y("div"),o=B(u),c=j(),p=y("div"),r&&r.c(),l=j(),f=y("div"),v=B(a),$=j(),h&&h.c(),S=j(),L=y("div"),C(p,"color","gray"),k(n,"class",""),C(n,"position","absolute"),C(n,"left","50%"),C(n,"transform","translate(-50%)"),C(n,"text-align","right"),k(s,"class","time svelte-c42o1v"),k(f,"class","w3-display-bottomleft w3-padding"),k(L,"class","w3-display-bottomright w3-padding"),k(t,"id","square"),k(t,"class",_=ce(e[1].running?"running":"")+" svelte-c42o1v")},m(E,I){A(E,t,I),g.m(t,null),m(t,i),m(t,s),m(s,n),m(n,o),m(n,c),m(n,p),r&&r.m(p,null),m(t,l),m(t,f),m(f,v),m(f,$),h&&h.m(f,null),m(t,S),m(t,L),L.innerHTML=w,O||(b=[T(t,"click",e[14]),T(t,"keydown",e[15])],O=!0)},p(E,[I]){d===(d=z(E))&&g?g.p(E,I):(g.d(1),g=d(E),g&&(g.c(),g.m(t,i))),I&2&&u!==(u=V(E[1].seconds)+"")&&ee(o,u),E[1].bronstein>0?r?r.p(E,I):(r=he(E),r.c(),r.m(p,null)):r&&(r.d(1),r=null),I&2&&a!==(a=E[1].moves+"")&&ee(v,a),E[1].moves>0?h?h.p(E,I):(h=pe(E),h.c(),h.m(f,null)):h&&(h.d(1),h=null),I&2&&w!==(w=V(E[1].totaltime)+"")&&(L.innerHTML=w),I&2&&_!==(_=ce(E[1].running?"running":"")+" svelte-c42o1v")&&k(t,"class",_)},i:q,o:q,d(E){E&&M(t),g.d(),r&&r.d(),h&&h.d(),O=!1,D(b)}}}function V(e){let t="";e<0&&(t+="-"),e=Math.abs(e);let i=Math.floor(e/(60*60)),s=Math.floor(e/60%60),n=Math.floor(e%60);return i>0&&(t+=i+":",s<10&&(t+="0")),s>0&&(t+=s+":",n<10&&(t+="0")),t+=n,t}function Fe(e,t,i){let s,n,{id:u=0}=t,{config:o={basetime:5,fischer:5,bronstein:5}}=t,{editable:c=!1}=t;const p={seconds:o.basetime,running:!1,bronstein:o.bronstein,checkpoint:0,moves:0,totaltime:0,name:""};let l=Ee("clockstate-"+u,p);ye(e,l,r=>i(1,n=r)),setInterval($,100);function f(){return n.running}function a(){return n}function v(r){N(l,n=r,n)}function $(){if(n.running){let r=Date.now(),h=(r-n.checkpoint)/1e3;N(l,n.checkpoint=r,n),N(l,n.totaltime+=h,n),n.bronstein-h>0?N(l,n.bronstein-=h,n):(N(l,n.seconds-=h-n.bronstein,n),N(l,n.bronstein=0,n))}}function S(){_(),N(l,n.bronstein=o.bronstein,n)}function L(){w(),N(l,n.seconds+=o.fischer,n),N(l,n.moves+=1,n)}function w(){$(),N(l,n.running=!1,n)}function _(){N(l,n.checkpoint=Date.now(),n),N(l,n.running=!0,n)}function O(){N(l,n.seconds=o.basetime,n),N(l,n.running=!1,n),N(l,n.bronstein=o.bronstein,n),N(l,n.moves=0,n),N(l,n.totaltime=0,n)}function b(r){ae.call(this,e,r)}function z(r){ae.call(this,e,r)}function d(){n.name=this.value,l.set(n)}function g(){n.name=this.value,l.set(n)}return e.$$set=r=>{"id"in r&&i(4,u=r.id),"config"in r&&i(5,o=r.config),"editable"in r&&i(0,c=r.editable)},e.$$.update=()=>{e.$$.dirty&2&&i(2,s=V(n.totaltime/n.moves))},[c,n,s,l,u,o,f,a,v,S,L,w,_,O,b,z,d,g]}class Ve extends ue{constructor(t){super(),oe(this,t,Fe,De,Y,{id:4,config:5,editable:0,isrunning:6,getstate:7,setstate:8,start:9,stop:10,pause:11,unpause:12,reset:13})}get isrunning(){return this.$$.ctx[6]}get getstate(){return this.$$.ctx[7]}get setstate(){return this.$$.ctx[8]}get start(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get pause(){return this.$$.ctx[11]}get unpause(){return this.$$.ctx[12]}get reset(){return this.$$.ctx[13]}}function me(e,t,i){const s=e.slice();return s[20]=t[i],s[21]=t,s[22]=i,s}function _e(e){let t,i,s,n,u,o,c,p,l,f,a,v,$,S,L;return{c(){t=y("div"),i=B("Players "),s=y("input"),n=B(`
            Basis `),u=y("input"),o=B(`
            Bronstein `),c=y("input"),p=B(`
            Fischer `),l=y("input"),f=B(`
            
            Fixed order`),a=y("input"),v=j(),$=y("button"),$.textContent="RESET",k(s,"type","number"),k(u,"type","number"),k(c,"type","number"),k(l,"type","number"),k(a,"type","checkbox"),k($,"class","w3-button"),k(t,"class","")},m(w,_){A(w,t,_),m(t,i),m(t,s),P(s,e[0].players),m(t,n),m(t,u),P(u,e[0].basetime),m(t,o),m(t,c),P(c,e[0].bronstein),m(t,p),m(t,l),P(l,e[0].fischer),m(t,f),m(t,a),a.checked=e[0].ordered,m(t,v),m(t,$),S||(L=[T(s,"input",e[10]),T(u,"input",e[11]),T(c,"input",e[12]),T(l,"input",e[13]),T(a,"change",e[14]),T($,"click",e[8])],S=!0)},p(w,_){_&1&&H(s.value)!==w[0].players&&P(s,w[0].players),_&1&&H(u.value)!==w[0].basetime&&P(u,w[0].basetime),_&1&&H(c.value)!==w[0].bronstein&&P(c,w[0].bronstein),_&1&&H(l.value)!==w[0].fischer&&P(l,w[0].fischer),_&1&&(a.checked=w[0].ordered)},d(w){w&&M(t),S=!1,D(L)}}}function ge(e){let t,i,s=e[20],n,u;const o=()=>e[15](i,s),c=()=>e[15](null,s);function p(){return e[16](e[20])}let l={id:e[20],config:e[0],editable:e[1]};return i=new Ve({props:l}),o(),i.$on("click",p),{c(){t=y("div"),$e(i.$$.fragment),n=j(),k(t,"class","w3-sand w3-border w3-padding w3-margin w3-round-large watch svelte-7y4jb0")},m(f,a){A(f,t,a),le(i,t,null),m(t,n),u=!0},p(f,a){e=f,s!==e[20]&&(c(),s=e[20],o());const v={};a&8&&(v.id=e[20]),a&1&&(v.config=e[0]),a&2&&(v.editable=e[1]),i.$set(v)},i(f){u||(K(i.$$.fragment,f),u=!0)},o(f){X(i.$$.fragment,f),u=!1},d(f){f&&M(t),c(),re(i)}}}function Je(e){let t,i,s,n,u,o,c,p,l,f,a,v,$,S,L,w,_=e[1]&&_e(e),O=e[3],b=[];for(let d=0;d<O.length;d+=1)b[d]=ge(me(e,O,d));const z=d=>X(b[d],1,1,()=>{b[d]=null});return{c(){t=y("link"),i=j(),s=y("div"),n=y("div"),u=B("Settings "),o=y("input"),c=j(),_&&_.c(),p=j(),l=y("button"),l.textContent="||",f=j(),a=y("button"),a.textContent="UNDO",v=j(),$=y("div");for(let d=0;d<b.length;d+=1)b[d].c();k(t,"rel","stylesheet"),k(t,"href","https://www.w3schools.com/w3css/4/w3.css"),k(o,"type","checkbox"),k(l,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),k(l,"style",""),k(a,"class","w3-button"),k(n,"class",""),C($,"position","absolute"),C($,"width","100%"),C($,"left","0"),C(s,"position","absolute"),C(s,"width","100%"),C(s,"height","100%"),C(s,"left","0"),C(s,"top","0")},m(d,g){A(d,t,g),A(d,i,g),A(d,s,g),m(s,n),m(n,u),m(n,o),o.checked=e[1],m(n,c),_&&_.m(n,null),m(n,p),m(n,l),m(n,f),m(n,a),m(s,v),m(s,$);for(let r=0;r<b.length;r+=1)b[r].m($,null);S=!0,L||(w=[T(o,"change",e[9]),T(l,"click",e[7]),T(a,"click",e[5])],L=!0)},p(d,[g]){if(g&2&&(o.checked=d[1]),d[1]?_?_.p(d,g):(_=_e(d),_.c(),_.m(n,p)):_&&(_.d(1),_=null),g&79){O=d[3];let r;for(r=0;r<O.length;r+=1){const h=me(d,O,r);b[r]?(b[r].p(h,g),K(b[r],1)):(b[r]=ge(h),b[r].c(),K(b[r],1),b[r].m($,null))}for(Pe(),r=O.length;r<b.length;r+=1)z(r);Be()}},i(d){if(!S){for(let g=0;g<O.length;g+=1)K(b[g]);S=!0}},o(d){b=b.filter(Boolean);for(let g=0;g<b.length;g+=1)X(b[g]);S=!1},d(d){d&&M(t),d&&M(i),d&&M(s),_&&_.d(),Le(b,d),L=!1,D(w)}}}function Ke(e,t,i){let s,n,u=!1,o=[],c=[],p=[0,1,4,2,3],f=Ee("config",{players:2,bronstein:0,fischer:0,basetime:10,ordered:!0});ye(e,f,r=>i(0,s=r));function a(){if(c.length==0)return;let r=c.pop();for(let h in o)o[h].setstate(r[h])}function v(r){if(c.push(structuredClone(o.map(h=>h.getstate()))),o.every(h=>h.isrunning()==!1))o[r].start(),n=void 0;else if(s.ordered&&o[r].isrunning()){o[r].stop();let h=(r+1)%p.length;o[h].start()}else if(!s.ordered&&!o[r].isrunning()){for(let h in p)o[h].isrunning()&&o[h].stop();o[r].start()}else!s.ordered&&o[r].isrunning()&&o[r].stop()}function $(){if(n===void 0)for(let r in p)o[r].isrunning()&&(n=r),o[r].pause();else o.every(r=>!r.isrunning())&&o[n].unpause(),n=void 0}function S(){for(let r in p)o[r].reset();n=void 0}function L(){u=this.checked,i(1,u)}function w(){s.players=H(this.value),f.set(s)}function _(){s.basetime=H(this.value),f.set(s)}function O(){s.bronstein=H(this.value),f.set(s)}function b(){s.fischer=H(this.value),f.set(s)}function z(){s.ordered=this.checked,f.set(s)}function d(r,h){te[r?"unshift":"push"](()=>{o[h]=r,i(2,o)})}const g=r=>v(r);return e.$$.update=()=>{e.$$.dirty&1&&i(3,p=[...Array(s.players).keys()])},[s,u,o,p,f,a,v,$,S,L,w,_,O,b,z,d,g]}class Re extends ue{constructor(t){super(),oe(this,t,Ke,Je,Y,{})}}function Ue(e){let t,i,s,n,u;return n=new Re({}),{c(){t=y("meta"),i=j(),s=y("main"),$e(n.$$.fragment),k(t,"name","viewport"),k(t,"content","width=device-width, initial-scale=1")},m(o,c){A(o,t,c),A(o,i,c),A(o,s,c),le(n,s,null),u=!0},p:q,i(o){u||(K(n.$$.fragment,o),u=!0)},o(o){X(n.$$.fragment,o),u=!1},d(o){o&&M(t),o&&M(i),o&&M(s),re(n)}}}class Ge extends ue{constructor(t){super(),oe(this,t,null,Ue,Y,{})}}new Ge({target:document.getElementById("app")});

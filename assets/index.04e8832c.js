(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function z(){}function be(e){return e()}function ce(){return Object.create(null)}function D(e){e.forEach(be)}function ve(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ce(e){return Object.keys(e).length===0}function we(e,...t){if(e==null)return z;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Se(e){let t;return we(e,i=>t=i)(),t}function ye(e,t,i){e.$$.on_destroy.push(we(t,i))}function fe(e){return e==null?"":e}function N(e,t,i){return e.set(i),t}function p(e,t){e.appendChild(t)}function O(e,t,i){e.insertBefore(t,i||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function Le(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function w(e){return document.createElement(e)}function Ne(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function B(e){return document.createTextNode(e)}function P(){return B(" ")}function T(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function _(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function H(e){return e===""?null:+e}function Me(e){return Array.from(e.childNodes)}function ee(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function j(e,t){e.value=t==null?"":t}function $(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}class Ae{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Ne(i.nodeName):this.e=w(i.nodeName),this.t=i,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)O(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(M)}}let se;function G(e){se=e}function ae(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const R=[],te=[],U=[],de=[],Oe=Promise.resolve();let ne=!1;function Pe(){ne||(ne=!0,Oe.then(ke))}function ie(e){U.push(e)}const Z=new Set;let Q=0;function ke(){const e=se;do{for(;Q<R.length;){const t=R[Q];Q++,G(t),Te(t.$$)}for(G(null),R.length=0,Q=0;te.length;)te.pop()();for(let t=0;t<U.length;t+=1){const i=U[t];Z.has(i)||(Z.add(i),i())}U.length=0}while(R.length);for(;de.length;)de.pop()();ne=!1,Z.clear(),G(e)}function Te(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}const W=new Set;let F;function je(){F={r:0,c:[],p:F}}function Be(){F.r||D(F.c),F=F.p}function K(e,t){e&&e.i&&(W.delete(e),e.i(t))}function X(e,t,i,s){if(e&&e.o){if(W.has(e))return;W.add(e),F.c.push(()=>{W.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function $e(e){e&&e.c()}function le(e,t,i,s){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,i),s||ie(()=>{const l=e.$$.on_mount.map(be).filter(ve);e.$$.on_destroy?e.$$.on_destroy.push(...l):D(l),e.$$.on_mount=[]}),o.forEach(ie)}function re(e,t){const i=e.$$;i.fragment!==null&&(D(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ie(e,t){e.$$.dirty[0]===-1&&(R.push(e),Pe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,i,s,n,o,l,d=[-1]){const m=se;G(e);const r=e.$$={fragment:null,ctx:[],props:o,update:z,not_equal:n,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:ce(),dirty:d,skip_bound:!1,root:t.target||m.$$.root};l&&l(r.root);let b=!1;if(r.ctx=i?i(e,t.props||{},(f,v,...y)=>{const E=y.length?y[0]:v;return r.ctx&&n(r.ctx[f],r.ctx[f]=E)&&(!r.skip_bound&&r.bound[f]&&r.bound[f](E),b&&Ie(e,f)),v}):[],r.update(),b=!0,D(r.before_update),r.fragment=s?s(r.ctx):!1,t.target){if(t.hydrate){const f=Me(t.target);r.fragment&&r.fragment.l(f),f.forEach(M)}else r.fragment&&r.fragment.c();t.intro&&K(e.$$.fragment),le(e,t.target,t.anchor,t.customElement),ke()}G(m)}class ue{$destroy(){re(this,1),this.$destroy=z}$on(t,i){if(!ve(i))return z;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J=[];function qe(e,t=z){let i;const s=new Set;function n(d){if(Y(e,d)&&(e=d,i)){const m=!J.length;for(const r of s)r[1](),J.push(r,e);if(m){for(let r=0;r<J.length;r+=2)J[r][0](J[r+1]);J.length=0}}}function o(d){n(d(e))}function l(d,m=z){const r=[d,m];return s.add(r),s.size===1&&(i=t(n)||z),d(e),()=>{s.delete(r),s.size===0&&(i(),i=null)}}return{set:n,update:o,subscribe:l}}var x={};function Ee(e,t,i){const s=typeof localStorage<"u"&&typeof window<"u",n=(i==null?void 0:i.serializer)||JSON;function o(l,d){!s||localStorage.setItem(l,n.stringify(d))}if(!x[e]){const l=qe(t,r=>{const b=s?localStorage.getItem(e):null;if(b&&r(n.parse(b)),s){const f=v=>{v.key===e&&r(v.newValue?n.parse(v.newValue):null)};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)}}),{subscribe:d,set:m}=l;x[e]={set(r){o(e,r),m(r)},update(r){const b=r(Se(l));o(e,b),m(b)},subscribe:d}}return x[e]}function ze(e){let t,i,s;return{c(){t=w("input"),_(t,"class","w3-input svelte-c42o1v"),$(t,"color","black"),$(t,"pointer-events","none")},m(n,o){O(n,t,o),j(t,e[1].name),i||(s=T(t,"input",e[17]),i=!0)},p(n,o){o&2&&t.value!==n[1].name&&j(t,n[1].name)},d(n){n&&M(t),i=!1,s()}}}function He(e){let t,i,s;return{c(){t=w("input"),_(t,"class","w3-input svelte-c42o1v"),$(t,"color","black")},m(n,o){O(n,t,o),j(t,e[1].name),i||(s=T(t,"input",e[16]),i=!0)},p(n,o){o&2&&t.value!==n[1].name&&j(t,n[1].name)},d(n){n&&M(t),i=!1,s()}}}function pe(e){let t=V(e[1].bronstein)+"",i;return{c(){i=B(t)},m(s,n){O(s,i,n)},p(s,n){n&2&&t!==(t=V(s[1].bronstein)+"")&&ee(i,t)},d(s){s&&M(i)}}}function he(e){let t,i,s;return{c(){t=B("("),i=new Ae(!1),s=B(")"),i.a=s},m(n,o){O(n,t,o),i.m(e[2],n,o),O(n,s,o)},p(n,o){o&4&&i.p(n[2])},d(n){n&&M(t),n&&i.d(),n&&M(s)}}}function De(e){let t,i,s,n,o=V(e[1].seconds)+"",l,d,m,r,b,f=e[1].moves+"",v,y,E,S,L=V(e[1].totaltime)+"",A,h,C;function k(g,q){return g[0]?He:ze}let I=k(e),a=I(e),c=e[1].bronstein>0&&pe(e),u=e[1].moves>0&&he(e);return{c(){t=w("div"),a.c(),i=P(),s=w("div"),n=w("div"),l=B(o),d=P(),m=w("div"),c&&c.c(),r=P(),b=w("div"),v=B(f),y=P(),u&&u.c(),E=P(),S=w("div"),$(m,"color","gray"),_(n,"class",""),$(n,"position","absolute"),$(n,"left","50%"),$(n,"transform","translate(-50%)"),$(n,"text-align","right"),_(s,"class","time svelte-c42o1v"),_(b,"class","w3-display-bottomleft w3-padding"),_(S,"class","w3-display-bottomright w3-padding"),_(t,"id","square"),_(t,"class",A=fe(e[1].running?"running":"")+" svelte-c42o1v")},m(g,q){O(g,t,q),a.m(t,null),p(t,i),p(t,s),p(s,n),p(n,l),p(n,d),p(n,m),c&&c.m(m,null),p(t,r),p(t,b),p(b,v),p(b,y),u&&u.m(b,null),p(t,E),p(t,S),S.innerHTML=L,h||(C=[T(t,"click",e[14]),T(t,"keydown",e[15])],h=!0)},p(g,[q]){I===(I=k(g))&&a?a.p(g,q):(a.d(1),a=I(g),a&&(a.c(),a.m(t,i))),q&2&&o!==(o=V(g[1].seconds)+"")&&ee(l,o),g[1].bronstein>0?c?c.p(g,q):(c=pe(g),c.c(),c.m(m,null)):c&&(c.d(1),c=null),q&2&&f!==(f=g[1].moves+"")&&ee(v,f),g[1].moves>0?u?u.p(g,q):(u=he(g),u.c(),u.m(b,null)):u&&(u.d(1),u=null),q&2&&L!==(L=V(g[1].totaltime)+"")&&(S.innerHTML=L),q&2&&A!==(A=fe(g[1].running?"running":"")+" svelte-c42o1v")&&_(t,"class",A)},i:z,o:z,d(g){g&&M(t),a.d(),c&&c.d(),u&&u.d(),h=!1,D(C)}}}function V(e){let t="";e<0&&(t+="-"),e=Math.abs(e);let i=Math.floor(e/(60*60)),s=Math.floor(e/60%60),n=Math.floor(e%60);return i>0&&(t+=i+":",s<10&&(t+="0")),s>0&&(t+=s+":",n<10&&(t+="0")),t+=n,t}function Fe(e,t,i){let s,n,{id:o=0}=t,{config:l={basetime:5,fischer:5,bronstein:5}}=t,{editable:d=!1}=t;const m={seconds:l.basetime,running:!1,bronstein:l.bronstein,checkpoint:0,moves:0,totaltime:0,name:"Player"};let r=Ee("clockstate-"+o,m);ye(e,r,c=>i(1,n=c)),setInterval(y,100);function b(){return n.running}function f(){return n}function v(c){N(r,n=c,n)}function y(){if(n.running){let c=Date.now(),u=(c-n.checkpoint)/1e3;N(r,n.checkpoint=c,n),N(r,n.totaltime+=u,n),n.bronstein-u>0?N(r,n.bronstein-=u,n):(N(r,n.seconds-=u-n.bronstein,n),N(r,n.bronstein=0,n))}}function E(){A(),N(r,n.bronstein=l.bronstein,n)}function S(){L(),N(r,n.seconds+=l.fischer,n),N(r,n.moves+=1,n)}function L(){y(),N(r,n.running=!1,n)}function A(){N(r,n.checkpoint=Date.now(),n),N(r,n.running=!0,n)}function h(){N(r,n.seconds=l.basetime,n),N(r,n.running=!1,n),N(r,n.bronstein=l.bronstein,n),N(r,n.moves=0,n),N(r,n.totaltime=0,n)}function C(c){ae.call(this,e,c)}function k(c){ae.call(this,e,c)}function I(){n.name=this.value,r.set(n)}function a(){n.name=this.value,r.set(n)}return e.$$set=c=>{"id"in c&&i(4,o=c.id),"config"in c&&i(5,l=c.config),"editable"in c&&i(0,d=c.editable)},e.$$.update=()=>{e.$$.dirty&2&&i(2,s=V(n.totaltime/n.moves))},[d,n,s,r,o,l,b,f,v,E,S,L,A,h,C,k,I,a]}class Ve extends ue{constructor(t){super(),oe(this,t,Fe,De,Y,{id:4,config:5,editable:0,isrunning:6,getstate:7,setstate:8,start:9,stop:10,pause:11,unpause:12,reset:13})}get isrunning(){return this.$$.ctx[6]}get getstate(){return this.$$.ctx[7]}get setstate(){return this.$$.ctx[8]}get start(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get pause(){return this.$$.ctx[11]}get unpause(){return this.$$.ctx[12]}get reset(){return this.$$.ctx[13]}}function ge(e,t,i){const s=e.slice();return s[21]=t[i],s[22]=t,s[23]=i,s}function me(e){let t,i,s,n,o,l,d,m,r,b,f,v,y,E,S,L,A;return{c(){t=w("div"),i=B("Players "),s=w("input"),n=B(`
            Basis `),o=w("input"),l=B(`
            Bronstein `),d=w("input"),m=B(`
            Fischer `),r=w("input"),b=P(),f=w("label"),f.textContent="Clockwise",v=w("br"),y=w("input"),E=P(),S=w("button"),S.textContent="RESET",_(s,"type","number"),_(s,"class","svelte-14sxoso"),_(o,"type","number"),_(o,"class","svelte-14sxoso"),_(d,"type","number"),_(d,"class","svelte-14sxoso"),_(r,"type","number"),_(r,"class","svelte-14sxoso"),_(f,"for","order"),_(y,"id","order"),_(y,"type","checkbox"),_(y,"class","svelte-14sxoso"),_(S,"class","w3-button w3-padding-small w3-light-grey w3-medium"),$(t,"display","flex"),$(t,"flex-direction","column"),$(t,"width","20%"),$(t,"margin","auto"),$(t,"padding","20px")},m(h,C){O(h,t,C),p(t,i),p(t,s),j(s,e[0].players),p(t,n),p(t,o),j(o,e[0].basetime),p(t,l),p(t,d),j(d,e[0].bronstein),p(t,m),p(t,r),j(r,e[0].fischer),p(t,b),p(t,f),p(t,v),p(t,y),y.checked=e[0].ordered,p(t,E),p(t,S),L||(A=[T(s,"input",e[10]),T(o,"input",e[11]),T(d,"input",e[12]),T(r,"input",e[13]),T(y,"change",e[14]),T(S,"click",e[8])],L=!0)},p(h,C){C&1&&H(s.value)!==h[0].players&&j(s,h[0].players),C&1&&H(o.value)!==h[0].basetime&&j(o,h[0].basetime),C&1&&H(d.value)!==h[0].bronstein&&j(d,h[0].bronstein),C&1&&H(r.value)!==h[0].fischer&&j(r,h[0].fischer),C&1&&(y.checked=h[0].ordered)},d(h){h&&M(t),L=!1,D(A)}}}function _e(e){let t,i,s,n=e[21],o,l;const d=()=>e[15](s,n),m=()=>e[15](null,n);function r(){return e[16](e[21])}let b={id:e[21],config:e[0],editable:e[1]};return s=new Ve({props:b}),d(),s.$on("click",r),{c(){t=w("div"),i=w("div"),$e(s.$$.fragment),o=P(),_(i,"class","w3-sand w3-border w3-padding w3-margin w3-round-large"),_(t,"class","watch svelte-14sxoso")},m(f,v){O(f,t,v),p(t,i),le(s,i,null),p(t,o),l=!0},p(f,v){e=f,n!==e[21]&&(m(),n=e[21],d());const y={};v&8&&(y.id=e[21]),v&1&&(y.config=e[0]),v&2&&(y.editable=e[1]),s.$set(y)},i(f){l||(K(s.$$.fragment,f),l=!0)},o(f){X(s.$$.fragment,f),l=!1},d(f){f&&M(t),m(),re(s)}}}function Je(e){let t,i,s,n,o,l,d,m,r,b,f,v,y,E,S,L,A,h=e[1]&&me(e),C=e[3],k=[];for(let a=0;a<C.length;a+=1)k[a]=_e(ge(e,C,a));const I=a=>X(k[a],1,1,()=>{k[a]=null});return{c(){t=w("link"),i=P(),s=w("div"),n=w("div"),o=B("Settings "),l=w("input"),d=w("br"),m=P(),h&&h.c(),r=P(),b=w("button"),b.textContent="\u23F4\uFE0E",f=P(),v=w("button"),v.textContent="\u23F8\uFE0E",y=P(),E=w("div");for(let a=0;a<k.length;a+=1)k[a].c();_(t,"rel","stylesheet"),_(t,"href","https://www.w3schools.com/w3css/4/w3.css"),_(l,"type","checkbox"),_(l,"class","svelte-14sxoso"),_(b,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),_(v,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),_(v,"style",""),_(n,"class",""),$(E,"position","absolute"),$(E,"width","100%"),$(E,"left","0"),$(E,"display","flex"),$(E,"flex-flow","row wrap"),$(E,"justify-content","center"),$(s,"position","absolute"),$(s,"width","100%"),$(s,"height","100%"),$(s,"left","0"),$(s,"top","0")},m(a,c){O(a,t,c),O(a,i,c),O(a,s,c),p(s,n),p(n,o),p(n,l),l.checked=e[1],p(n,d),p(n,m),h&&h.m(n,null),p(n,r),p(n,b),p(n,f),p(n,v),p(s,y),p(s,E);for(let u=0;u<k.length;u+=1)k[u].m(E,null);S=!0,L||(A=[T(l,"change",e[9]),T(b,"click",e[5]),T(v,"click",e[7])],L=!0)},p(a,[c]){if(c&2&&(l.checked=a[1]),a[1]?h?h.p(a,c):(h=me(a),h.c(),h.m(n,r)):h&&(h.d(1),h=null),c&79){C=a[3];let u;for(u=0;u<C.length;u+=1){const g=ge(a,C,u);k[u]?(k[u].p(g,c),K(k[u],1)):(k[u]=_e(g),k[u].c(),K(k[u],1),k[u].m(E,null))}for(je(),u=C.length;u<k.length;u+=1)I(u);Be()}},i(a){if(!S){for(let c=0;c<C.length;c+=1)K(k[c]);S=!0}},o(a){k=k.filter(Boolean);for(let c=0;c<k.length;c+=1)X(k[c]);S=!1},d(a){a&&M(t),a&&M(i),a&&M(s),h&&h.d(),Le(k,a),L=!1,D(A)}}}function Ke(e,t,i){let s,n,o=!1,l=[],d=[],m=[0,1,4,2,3];const r=[[0],[1,0],[1,2,0],[1,3,0,2],[0,1,3,4,2],[0,1,3,5,4,2],[0,1,3,5,6,4,2],[0,1,3,5,7,6,4,2]];let f=Ee("config",{players:4,bronstein:5,fischer:5,basetime:10,ordered:!0});ye(e,f,u=>i(0,s=u));function v(){if(d.length==0)return;let u=d.pop();for(let g in u)l[g].setstate(u[g])}function y(u){if(!o)if(d.push(structuredClone(l.map(g=>g.getstate()))),l.every(g=>g.isrunning()==!1))l[u].start(),n=void 0;else if(s.ordered&&l[u].isrunning()){l[u].stop();let g=r[s.players-1][u];l[g].start()}else if(!s.ordered&&!l[u].isrunning()){for(let g in m)l[g].isrunning()&&l[g].stop();l[u].start()}else!s.ordered&&l[u].isrunning()&&l[u].stop()}function E(){if(d.push(structuredClone(l.map(u=>u.getstate()))),n===void 0)for(let u in m)l[u].isrunning()&&(n=u),l[u].pause();else l.every(u=>!u.isrunning())&&l[n].unpause(),n=void 0}function S(){for(let u in m)l[u].reset();n=void 0}function L(){o=this.checked,i(1,o)}function A(){s.players=H(this.value),f.set(s)}function h(){s.basetime=H(this.value),f.set(s)}function C(){s.bronstein=H(this.value),f.set(s)}function k(){s.fischer=H(this.value),f.set(s)}function I(){s.ordered=this.checked,f.set(s)}function a(u,g){te[u?"unshift":"push"](()=>{l[g]=u,i(2,l)})}const c=u=>y(u);return e.$$.update=()=>{e.$$.dirty&1&&i(3,m=[...Array(s.players).keys()])},[s,o,l,m,f,v,y,E,S,L,A,h,C,k,I,a,c]}class Re extends ue{constructor(t){super(),oe(this,t,Ke,Je,Y,{})}}function Ge(e){let t,i,s,n,o;return n=new Re({}),{c(){t=w("meta"),i=P(),s=w("main"),$e(n.$$.fragment),_(t,"name","viewport"),_(t,"content","width=device-width, initial-scale=1")},m(l,d){O(l,t,d),O(l,i,d),O(l,s,d),le(n,s,null),o=!0},p:z,i(l){o||(K(n.$$.fragment,l),o=!0)},o(l){X(n.$$.fragment,l),o=!1},d(l){l&&M(t),l&&M(i),l&&M(s),re(n)}}}class Qe extends ue{constructor(t){super(),oe(this,t,null,Ge,Y,{})}}new Qe({target:document.getElementById("app")});

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();function B(){}function me(e){return e()}function oe(){return Object.create(null)}function z(e){e.forEach(me)}function _e(e){return typeof e=="function"}function W(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function $e(e){return Object.keys(e).length===0}function be(e,...t){if(e==null)return B;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Ee(e){let t;return be(e,i=>t=i)(),t}function ve(e,t,i){e.$$.on_destroy.push(be(t,i))}function ue(e){return e==null?"":e}function S(e,t,i){return e.set(i),t}function g(e,t){e.appendChild(t)}function A(e,t,i){e.insertBefore(t,i||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function Se(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function k(e){return document.createElement(e)}function Ne(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function j(e){return document.createTextNode(e)}function O(){return j(" ")}function T(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function y(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function q(e){return e===""?null:+e}function Le(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function P(e,t){e.value=t==null?"":t}function C(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}class Ce{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Ne(i.nodeName):this.e=k(i.nodeName),this.t=i,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)A(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(M)}}let ne;function K(e){ne=e}function ce(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const J=[],x=[],U=[],fe=[],Me=Promise.resolve();let ee=!1;function Oe(){ee||(ee=!0,Me.then(we))}function te(e){U.push(e)}const X=new Set;let R=0;function we(){const e=ne;do{for(;R<J.length;){const t=J[R];R++,K(t),Ae(t.$$)}for(K(null),J.length=0,R=0;x.length;)x.pop()();for(let t=0;t<U.length;t+=1){const i=U[t];X.has(i)||(X.add(i),i())}U.length=0}while(J.length);for(;fe.length;)fe.pop()();ee=!1,X.clear(),K(e)}function Ae(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}const G=new Set;let H;function Te(){H={r:0,c:[],p:H}}function je(){H.r||z(H.c),H=H.p}function V(e,t){e&&e.i&&(G.delete(e),e.i(t))}function Q(e,t,i,s){if(e&&e.o){if(G.has(e))return;G.add(e),H.c.push(()=>{G.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function ye(e){e&&e.c()}function ie(e,t,i,s){const{fragment:n,after_update:l}=e.$$;n&&n.m(t,i),s||te(()=>{const r=e.$$.on_mount.map(me).filter(_e);e.$$.on_destroy?e.$$.on_destroy.push(...r):z(r),e.$$.on_mount=[]}),l.forEach(te)}function se(e,t){const i=e.$$;i.fragment!==null&&(z(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Pe(e,t){e.$$.dirty[0]===-1&&(J.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function re(e,t,i,s,n,l,r,a=[-1]){const f=ne;K(e);const c=e.$$={fragment:null,ctx:[],props:l,update:B,not_equal:n,bound:oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:oe(),dirty:a,skip_bound:!1,root:t.target||f.$$.root};r&&r(c.root);let p=!1;if(c.ctx=i?i(e,t.props||{},(d,b,...$)=>{const E=$.length?$[0]:b;return c.ctx&&n(c.ctx[d],c.ctx[d]=E)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](E),p&&Pe(e,d)),b}):[],c.update(),p=!0,z(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const d=Le(t.target);c.fragment&&c.fragment.l(d),d.forEach(M)}else c.fragment&&c.fragment.c();t.intro&&V(e.$$.fragment),ie(e,t.target,t.anchor,t.customElement),we()}K(f)}class le{$destroy(){se(this,1),this.$destroy=B}$on(t,i){if(!_e(i))return B;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!$e(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const F=[];function Be(e,t=B){let i;const s=new Set;function n(a){if(W(e,a)&&(e=a,i)){const f=!F.length;for(const c of s)c[1](),F.push(c,e);if(f){for(let c=0;c<F.length;c+=2)F[c][0](F[c+1]);F.length=0}}}function l(a){n(a(e))}function r(a,f=B){const c=[a,f];return s.add(c),s.size===1&&(i=t(n)||B),a(e),()=>{s.delete(c),s.size===0&&(i(),i=null)}}return{set:n,update:l,subscribe:r}}var Y={};function ke(e,t,i){const s=typeof localStorage<"u"&&typeof window<"u",n=(i==null?void 0:i.serializer)||JSON;function l(r,a){!s||localStorage.setItem(r,n.stringify(a))}if(!Y[e]){const r=Be(t,c=>{const p=s?localStorage.getItem(e):null;if(p&&c(n.parse(p)),s){const d=b=>{b.key===e&&c(b.newValue?n.parse(b.newValue):null)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)}}),{subscribe:a,set:f}=r;Y[e]={set(c){l(e,c),f(c)},update(c){const p=c(Ee(r));l(e,p),f(p)},subscribe:a}}return Y[e]}function ae(e){let t=D(e[0].bronstein)+"",i;return{c(){i=j(t)},m(s,n){A(s,i,n)},p(s,n){n&1&&t!==(t=D(s[0].bronstein)+"")&&Z(i,t)},d(s){s&&M(i)}}}function de(e){let t,i,s;return{c(){t=j("("),i=new Ce(!1),s=j(")"),i.a=s},m(n,l){A(n,t,l),i.m(e[1],n,l),A(n,s,l)},p(n,l){l&2&&i.p(n[1])},d(n){n&&M(t),n&&i.d(),n&&M(s)}}}function Ie(e){let t,i,s,n,l,r=D(e[0].seconds)+"",a,f,c,p,d,b=e[0].moves+"",$,E,L,v,m=D(e[0].totaltime)+"",N,_,I,o=e[0].bronstein>0&&ae(e),h=e[0].moves>0&&de(e);return{c(){t=k("div"),i=k("input"),s=O(),n=k("div"),l=k("div"),a=j(r),f=O(),c=k("div"),o&&o.c(),p=O(),d=k("div"),$=j(b),E=O(),h&&h.c(),L=O(),v=k("div"),y(i,"class","w3-input svelte-c42o1v"),C(i,"color","black"),C(c,"color","gray"),y(l,"class",""),C(l,"position","absolute"),C(l,"left","50%"),C(l,"transform","translate(-50%)"),C(l,"text-align","right"),y(n,"class","time svelte-c42o1v"),y(d,"class","w3-display-bottomleft w3-padding"),y(v,"class","w3-display-bottomright w3-padding"),y(t,"id","square"),y(t,"class",N=ue(e[0].running?"running":"")+" svelte-c42o1v")},m(u,w){A(u,t,w),g(t,i),P(i,e[0].name),g(t,s),g(t,n),g(n,l),g(l,a),g(l,f),g(l,c),o&&o.m(c,null),g(t,p),g(t,d),g(d,$),g(d,E),h&&h.m(d,null),g(t,L),g(t,v),v.innerHTML=m,_||(I=[T(i,"input",e[15]),T(t,"click",e[13]),T(t,"keydown",e[14])],_=!0)},p(u,[w]){w&1&&i.value!==u[0].name&&P(i,u[0].name),w&1&&r!==(r=D(u[0].seconds)+"")&&Z(a,r),u[0].bronstein>0?o?o.p(u,w):(o=ae(u),o.c(),o.m(c,null)):o&&(o.d(1),o=null),w&1&&b!==(b=u[0].moves+"")&&Z($,b),u[0].moves>0?h?h.p(u,w):(h=de(u),h.c(),h.m(d,null)):h&&(h.d(1),h=null),w&1&&m!==(m=D(u[0].totaltime)+"")&&(v.innerHTML=m),w&1&&N!==(N=ue(u[0].running?"running":"")+" svelte-c42o1v")&&y(t,"class",N)},i:B,o:B,d(u){u&&M(t),o&&o.d(),h&&h.d(),_=!1,z(I)}}}function D(e){let t="";e<0&&(t+="-"),e=Math.abs(e);let i=Math.floor(e/(60*60)),s=Math.floor(e/60%60),n=Math.floor(e%60);return i>0&&(t+=i+":",s<10&&(t+="0")),s>0&&(t+=s+":",n<10&&(t+="0")),t+=n,t}function qe(e,t,i){let s,n,{id:l=0}=t,{config:r={basetime:5,fischer:5,bronstein:5}}=t;const a={seconds:r.basetime,running:!1,bronstein:r.bronstein,checkpoint:0,moves:0,totaltime:0,name:""};let f=ke("clockstate-"+l,a);ve(e,f,o=>i(0,n=o)),setInterval(b,100);function c(){return n.running}function p(){return n}function d(o){S(f,n=o,n)}function b(){if(n.running){let o=Date.now(),h=(o-n.checkpoint)/1e3;S(f,n.checkpoint=o,n),S(f,n.totaltime+=h,n),n.bronstein-h>0?S(f,n.bronstein-=h,n):(S(f,n.seconds-=h-n.bronstein,n),S(f,n.bronstein=0,n))}}function $(){v(),S(f,n.bronstein=r.bronstein,n)}function E(){L(),S(f,n.seconds+=r.fischer,n),S(f,n.moves+=1,n)}function L(){b(),S(f,n.running=!1,n)}function v(){S(f,n.checkpoint=Date.now(),n),S(f,n.running=!0,n)}function m(){S(f,n.seconds=r.basetime,n),S(f,n.running=!1,n),S(f,n.bronstein=r.bronstein,n),S(f,n.moves=0,n),S(f,n.totaltime=0,n)}function N(o){ce.call(this,e,o)}function _(o){ce.call(this,e,o)}function I(){n.name=this.value,f.set(n)}return e.$$set=o=>{"id"in o&&i(3,l=o.id),"config"in o&&i(4,r=o.config)},e.$$.update=()=>{e.$$.dirty&1&&i(1,s=D(n.totaltime/n.moves))},[n,s,f,l,r,c,p,d,$,E,L,v,m,N,_,I]}class ze extends le{constructor(t){super(),re(this,t,qe,Ie,W,{id:3,config:4,isrunning:5,getstate:6,setstate:7,start:8,stop:9,pause:10,unpause:11,reset:12})}get isrunning(){return this.$$.ctx[5]}get getstate(){return this.$$.ctx[6]}get setstate(){return this.$$.ctx[7]}get start(){return this.$$.ctx[8]}get stop(){return this.$$.ctx[9]}get pause(){return this.$$.ctx[10]}get unpause(){return this.$$.ctx[11]}get reset(){return this.$$.ctx[12]}}function he(e,t,i){const s=e.slice();return s[20]=t[i],s[21]=t,s[22]=i,s}function pe(e){let t,i,s,n,l,r,a,f,c,p,d,b,$,E,L;return{c(){t=k("div"),i=j("Players "),s=k("input"),n=j(`
            Basis `),l=k("input"),r=j(`
            Bronstein `),a=k("input"),f=j(`
            Fischer `),c=k("input"),p=j(`
            
            Fixed order`),d=k("input"),b=O(),$=k("button"),$.textContent="RESET",y(s,"type","number"),y(l,"type","number"),y(a,"type","number"),y(c,"type","number"),y(d,"type","checkbox"),y($,"class","w3-button"),y(t,"class","")},m(v,m){A(v,t,m),g(t,i),g(t,s),P(s,e[0].players),g(t,n),g(t,l),P(l,e[0].basetime),g(t,r),g(t,a),P(a,e[0].bronstein),g(t,f),g(t,c),P(c,e[0].fischer),g(t,p),g(t,d),d.checked=e[0].ordered,g(t,b),g(t,$),E||(L=[T(s,"input",e[10]),T(l,"input",e[11]),T(a,"input",e[12]),T(c,"input",e[13]),T(d,"change",e[14]),T($,"click",e[8])],E=!0)},p(v,m){m&1&&q(s.value)!==v[0].players&&P(s,v[0].players),m&1&&q(l.value)!==v[0].basetime&&P(l,v[0].basetime),m&1&&q(a.value)!==v[0].bronstein&&P(a,v[0].bronstein),m&1&&q(c.value)!==v[0].fischer&&P(c,v[0].fischer),m&1&&(d.checked=v[0].ordered)},d(v){v&&M(t),E=!1,z(L)}}}function ge(e){let t,i,s=e[20],n,l;const r=()=>e[15](i,s),a=()=>e[15](null,s);function f(){return e[16](e[20])}let c={id:e[20],config:e[0]};return i=new ze({props:c}),r(),i.$on("click",f),{c(){t=k("div"),ye(i.$$.fragment),n=O(),y(t,"class","w3-sand w3-border w3-padding w3-margin w3-round-large watch svelte-7y4jb0")},m(p,d){A(p,t,d),ie(i,t,null),g(t,n),l=!0},p(p,d){e=p,s!==e[20]&&(a(),s=e[20],r());const b={};d&8&&(b.id=e[20]),d&1&&(b.config=e[0]),i.$set(b)},i(p){l||(V(i.$$.fragment,p),l=!0)},o(p){Q(i.$$.fragment,p),l=!1},d(p){p&&M(t),a(),se(i)}}}function He(e){let t,i,s,n,l,r,a,f,c,p,d,b,$,E,L,v,m=e[1]&&pe(e),N=e[3],_=[];for(let o=0;o<N.length;o+=1)_[o]=ge(he(e,N,o));const I=o=>Q(_[o],1,1,()=>{_[o]=null});return{c(){t=k("link"),i=O(),s=k("div"),n=k("div"),l=j("Settings "),r=k("input"),a=O(),m&&m.c(),f=O(),c=k("button"),c.textContent="||",p=O(),d=k("button"),d.textContent="UNDO",b=O(),$=k("div");for(let o=0;o<_.length;o+=1)_[o].c();y(t,"rel","stylesheet"),y(t,"href","https://www.w3schools.com/w3css/4/w3.css"),y(r,"type","checkbox"),y(c,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),y(c,"style",""),y(d,"class","w3-button"),y(n,"class",""),C($,"position","absolute"),C($,"width","100%"),C($,"left","0"),C(s,"position","absolute"),C(s,"width","100%"),C(s,"height","100%"),C(s,"left","0"),C(s,"top","0")},m(o,h){A(o,t,h),A(o,i,h),A(o,s,h),g(s,n),g(n,l),g(n,r),r.checked=e[1],g(n,a),m&&m.m(n,null),g(n,f),g(n,c),g(n,p),g(n,d),g(s,b),g(s,$);for(let u=0;u<_.length;u+=1)_[u].m($,null);E=!0,L||(v=[T(r,"change",e[9]),T(c,"click",e[7]),T(d,"click",e[5])],L=!0)},p(o,[h]){if(h&2&&(r.checked=o[1]),o[1]?m?m.p(o,h):(m=pe(o),m.c(),m.m(n,f)):m&&(m.d(1),m=null),h&77){N=o[3];let u;for(u=0;u<N.length;u+=1){const w=he(o,N,u);_[u]?(_[u].p(w,h),V(_[u],1)):(_[u]=ge(w),_[u].c(),V(_[u],1),_[u].m($,null))}for(Te(),u=N.length;u<_.length;u+=1)I(u);je()}},i(o){if(!E){for(let h=0;h<N.length;h+=1)V(_[h]);E=!0}},o(o){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)Q(_[h]);E=!1},d(o){o&&M(t),o&&M(i),o&&M(s),m&&m.d(),Se(_,o),L=!1,z(v)}}}function De(e,t,i){let s,n,l=!1,r=[],a=[],f=[0,1,4,2,3],p=ke("config",{players:2,bronstein:0,fischer:0,basetime:10,ordered:!0});ve(e,p,u=>i(0,s=u));function d(){if(a.length==0)return;let u=a.pop();for(let w in r)r[w].setstate(u[w])}function b(u){if(a.push(structuredClone(r.map(w=>w.getstate()))),r.every(w=>w.isrunning()==!1))r[u].start(),n=void 0;else if(s.ordered&&r[u].isrunning()){r[u].stop();let w=(u+1)%f.length;r[w].start()}else if(!s.ordered&&!r[u].isrunning()){for(let w in f)r[w].isrunning()&&r[w].stop();r[u].start()}else!s.ordered&&r[u].isrunning()&&r[u].stop()}function $(){if(n===void 0)for(let u in f)r[u].isrunning()&&(n=u),r[u].pause();else r.every(u=>!u.isrunning())&&r[n].unpause(),n=void 0}function E(){for(let u in f)r[u].reset();n=void 0}function L(){l=this.checked,i(1,l)}function v(){s.players=q(this.value),p.set(s)}function m(){s.basetime=q(this.value),p.set(s)}function N(){s.bronstein=q(this.value),p.set(s)}function _(){s.fischer=q(this.value),p.set(s)}function I(){s.ordered=this.checked,p.set(s)}function o(u,w){x[u?"unshift":"push"](()=>{r[w]=u,i(2,r)})}const h=u=>b(u);return e.$$.update=()=>{e.$$.dirty&1&&i(3,f=[...Array(s.players).keys()])},[s,l,r,f,p,d,b,$,E,L,v,m,N,_,I,o,h]}class Fe extends le{constructor(t){super(),re(this,t,De,He,W,{})}}function Ve(e){let t,i,s,n,l;return n=new Fe({}),{c(){t=k("meta"),i=O(),s=k("main"),ye(n.$$.fragment),y(t,"name","viewport"),y(t,"content","width=device-width, initial-scale=1")},m(r,a){A(r,t,a),A(r,i,a),A(r,s,a),ie(n,s,null),l=!0},p:B,i(r){l||(V(n.$$.fragment,r),l=!0)},o(r){Q(n.$$.fragment,r),l=!1},d(r){r&&M(t),r&&M(i),r&&M(s),se(n)}}}class Je extends le{constructor(t){super(),re(this,t,null,Ve,W,{})}}new Je({target:document.getElementById("app")});

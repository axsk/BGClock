(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function H(){}function we(e){return e()}function ae(){return Object.create(null)}function F(e){e.forEach(we)}function ye(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Le(e){return Object.keys(e).length===0}function ke(e,...t){if(e==null)return H;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Ne(e){let t;return ke(e,i=>t=i)(),t}function $e(e,t,i){e.$$.on_destroy.push(ke(t,i))}function de(e){return e==null?"":e}function P(e,t,i){return e.set(i),t}function p(e,t){e.appendChild(t)}function T(e,t,i){e.insertBefore(t,i||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function Ae(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function w(e){return document.createElement(e)}function Me(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function I(e){return document.createTextNode(e)}function j(){return I(" ")}function B(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function g(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function D(e){return e===""?null:+e}function Oe(e){return Array.from(e.childNodes)}function te(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function q(e,t){e.value=t==null?"":t}function $(e,t,i,s){i===null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}class Pe{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Me(i.nodeName):this.e=w(i.nodeName),this.t=i,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)T(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(L)}}let le;function Q(e){le=e}function pe(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const G=[],ne=[],W=[],he=[],Te=Promise.resolve();let ie=!1;function je(){ie||(ie=!0,Te.then(Ee))}function se(e){W.push(e)}const x=new Set;let U=0;function Ee(){const e=le;do{for(;U<G.length;){const t=G[U];U++,Q(t),Be(t.$$)}for(Q(null),G.length=0,U=0;ne.length;)ne.pop()();for(let t=0;t<W.length;t+=1){const i=W[t];x.has(i)||(x.add(i),i())}W.length=0}while(G.length);for(;he.length;)he.pop()();ie=!1,x.clear(),Q(e)}function Be(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(se)}}const X=new Set;let V;function Ie(){V={r:0,c:[],p:V}}function qe(){V.r||F(V.c),V=V.p}function R(e,t){e&&e.i&&(X.delete(e),e.i(t))}function Y(e,t,i,s){if(e&&e.o){if(X.has(e))return;X.add(e),V.c.push(()=>{X.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function Se(e){e&&e.c()}function re(e,t,i,s){const{fragment:n,after_update:o}=e.$$;n&&n.m(t,i),s||se(()=>{const l=e.$$.on_mount.map(we).filter(ye);e.$$.on_destroy?e.$$.on_destroy.push(...l):F(l),e.$$.on_mount=[]}),o.forEach(se)}function oe(e,t){const i=e.$$;i.fragment!==null&&(F(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function ze(e,t){e.$$.dirty[0]===-1&&(G.push(e),je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,i,s,n,o,l,d=[-1]){const _=le;Q(e);const r=e.$$={fragment:null,ctx:[],props:o,update:H,not_equal:n,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:ae(),dirty:d,skip_bound:!1,root:t.target||_.$$.root};l&&l(r.root);let v=!1;if(r.ctx=i?i(e,t.props||{},(a,m,...y)=>{const k=y.length?y[0]:m;return r.ctx&&n(r.ctx[a],r.ctx[a]=k)&&(!r.skip_bound&&r.bound[a]&&r.bound[a](k),v&&ze(e,a)),m}):[],r.update(),v=!0,F(r.before_update),r.fragment=s?s(r.ctx):!1,t.target){if(t.hydrate){const a=Oe(t.target);r.fragment&&r.fragment.l(a),a.forEach(L)}else r.fragment&&r.fragment.c();t.intro&&R(e.$$.fragment),re(e,t.target,t.anchor,t.customElement),Ee()}Q(_)}class ce{$destroy(){oe(this,1),this.$destroy=H}$on(t,i){if(!ye(i))return H;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const n=s.indexOf(i);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const K=[];function He(e,t=H){let i;const s=new Set;function n(d){if(Z(e,d)&&(e=d,i)){const _=!K.length;for(const r of s)r[1](),K.push(r,e);if(_){for(let r=0;r<K.length;r+=2)K[r][0](K[r+1]);K.length=0}}}function o(d){n(d(e))}function l(d,_=H){const r=[d,_];return s.add(r),s.size===1&&(i=t(n)||H),d(e),()=>{s.delete(r),s.size===0&&(i(),i=null)}}return{set:n,update:o,subscribe:l}}var ee={};function Ce(e,t,i){const s=typeof localStorage<"u"&&typeof window<"u",n=(i==null?void 0:i.serializer)||JSON;function o(l,d){!s||localStorage.setItem(l,n.stringify(d))}if(!ee[e]){const l=He(t,r=>{const v=s?localStorage.getItem(e):null;if(v&&r(n.parse(v)),s){const a=m=>{m.key===e&&r(m.newValue?n.parse(m.newValue):null)};return window.addEventListener("storage",a),()=>window.removeEventListener("storage",a)}}),{subscribe:d,set:_}=l;ee[e]={set(r){o(e,r),_(r)},update(r){const v=r(Ne(l));o(e,v),_(v)},subscribe:d}}return ee[e]}function De(e){let t,i,s;return{c(){t=w("input"),g(t,"class","w3-input svelte-1r002gk"),$(t,"color","black"),$(t,"pointer-events","none")},m(n,o){T(n,t,o),q(t,e[1].name),i||(s=B(t,"input",e[17]),i=!0)},p(n,o){o&2&&t.value!==n[1].name&&q(t,n[1].name)},d(n){n&&L(t),i=!1,s()}}}function Fe(e){let t,i,s;return{c(){t=w("input"),g(t,"class","w3-input svelte-1r002gk"),$(t,"color","black")},m(n,o){T(n,t,o),q(t,e[1].name),i||(s=B(t,"input",e[16]),i=!0)},p(n,o){o&2&&t.value!==n[1].name&&q(t,n[1].name)},d(n){n&&L(t),i=!1,s()}}}function _e(e){let t=J(e[1].bronstein)+"",i;return{c(){i=I(t)},m(s,n){T(s,i,n)},p(s,n){n&2&&t!==(t=J(s[1].bronstein)+"")&&te(i,t)},d(s){s&&L(i)}}}function ge(e){let t,i,s;return{c(){t=I("("),i=new Pe(!1),s=I(")"),i.a=s},m(n,o){T(n,t,o),i.m(e[2],n,o),T(n,s,o)},p(n,o){o&4&&i.p(n[2])},d(n){n&&L(t),n&&i.d(),n&&L(s)}}}function Ve(e){let t,i,s,n,o=J(e[1].seconds)+"",l,d,_,r,v,a=e[1].moves+"",m,y,k,C,N=J(e[1].totaltime)+"",A,h,M;function z(f,u){return f[0]?Fe:De}let O=z(e),S=O(e),c=e[1].bronstein>0&&_e(e),E=e[1].moves>0&&ge(e);return{c(){t=w("div"),S.c(),i=j(),s=w("div"),n=w("div"),l=I(o),d=j(),_=w("div"),c&&c.c(),r=j(),v=w("div"),m=I(a),y=j(),E&&E.c(),k=j(),C=w("div"),$(_,"color","gray"),g(n,"class",""),$(n,"position","absolute"),$(n,"left","50%"),$(n,"transform","translate(-50%)"),$(n,"text-align","right"),g(s,"class","time svelte-1r002gk"),g(v,"class","w3-display-bottomleft w3-padding"),g(C,"class","w3-display-bottomright w3-padding"),g(t,"id","square"),g(t,"class",A=de(e[1].running?"running":"")+" svelte-1r002gk")},m(f,u){T(f,t,u),S.m(t,null),p(t,i),p(t,s),p(s,n),p(n,l),p(n,d),p(n,_),c&&c.m(_,null),p(t,r),p(t,v),p(v,m),p(v,y),E&&E.m(v,null),p(t,k),p(t,C),C.innerHTML=N,h||(M=[B(t,"click",e[14]),B(t,"keydown",e[15])],h=!0)},p(f,[u]){O===(O=z(f))&&S?S.p(f,u):(S.d(1),S=O(f),S&&(S.c(),S.m(t,i))),u&2&&o!==(o=J(f[1].seconds)+"")&&te(l,o),f[1].bronstein>0?c?c.p(f,u):(c=_e(f),c.c(),c.m(_,null)):c&&(c.d(1),c=null),u&2&&a!==(a=f[1].moves+"")&&te(m,a),f[1].moves>0?E?E.p(f,u):(E=ge(f),E.c(),E.m(v,null)):E&&(E.d(1),E=null),u&2&&N!==(N=J(f[1].totaltime)+"")&&(C.innerHTML=N),u&2&&A!==(A=de(f[1].running?"running":"")+" svelte-1r002gk")&&g(t,"class",A)},i:H,o:H,d(f){f&&L(t),S.d(),c&&c.d(),E&&E.d(),h=!1,F(M)}}}function J(e){let t="";e<0&&(t+="-"),e=Math.abs(e);let i=Math.floor(e/(60*60)),s=Math.floor(e/60%60),n=Math.floor(e%60);return i>0&&(t+=i+":",s<10&&(t+="0")),s>0&&(t+=s+":",n<10&&(t+="0")),t+=n,t}function Je(e,t,i){let s,n,{id:o=0}=t,{config:l={basetime:5,fischer:5,bronstein:5}}=t,{editable:d=!1}=t;const _={seconds:l.basetime,running:!1,bronstein:l.bronstein,checkpoint:0,moves:0,totaltime:0,name:"Player"};let r=Ce("clockstate-"+o,_);$e(e,r,c=>i(1,n=c)),setInterval(y,100);function v(){return n.running}function a(){return n}function m(c){P(r,n=c,n)}function y(){if(n.running){let c=Date.now(),E=(c-n.checkpoint)/1e3;P(r,n.checkpoint=c,n),P(r,n.totaltime+=E,n),n.bronstein-E>0?P(r,n.bronstein-=E,n):(P(r,n.seconds-=E-n.bronstein,n),P(r,n.bronstein=0,n))}}function k(){A(),P(r,n.bronstein=l.bronstein,n)}function C(){N(),P(r,n.seconds+=l.fischer,n),P(r,n.moves+=1,n)}function N(){y(),P(r,n.running=!1,n)}function A(){P(r,n.checkpoint=Date.now(),n),P(r,n.running=!0,n)}function h(){P(r,n.seconds=l.basetime,n),P(r,n.running=!1,n),P(r,n.bronstein=l.bronstein,n),P(r,n.moves=0,n),P(r,n.totaltime=0,n)}function M(c){pe.call(this,e,c)}function z(c){pe.call(this,e,c)}function O(){n.name=this.value,r.set(n)}function S(){n.name=this.value,r.set(n)}return e.$$set=c=>{"id"in c&&i(4,o=c.id),"config"in c&&i(5,l=c.config),"editable"in c&&i(0,d=c.editable)},e.$$.update=()=>{e.$$.dirty&2&&i(2,s=J(n.totaltime/n.moves))},[d,n,s,r,o,l,v,a,m,k,C,N,A,h,M,z,O,S]}class Ke extends ce{constructor(t){super(),ue(this,t,Je,Ve,Z,{id:4,config:5,editable:0,isrunning:6,getstate:7,setstate:8,start:9,stop:10,pause:11,unpause:12,reset:13})}get isrunning(){return this.$$.ctx[6]}get getstate(){return this.$$.ctx[7]}get setstate(){return this.$$.ctx[8]}get start(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get pause(){return this.$$.ctx[11]}get unpause(){return this.$$.ctx[12]}get reset(){return this.$$.ctx[13]}}function me(e,t,i){const s=e.slice();return s[23]=t[i],s[24]=t,s[25]=i,s}function be(e){let t,i,s,n,o,l,d,_,r,v,a,m,y,k,C,N,A;return{c(){t=w("div"),i=I("Players "),s=w("input"),n=I(`
            Basis `),o=w("input"),l=I(`
            Bronstein `),d=w("input"),_=I(`
            Fischer `),r=w("input"),v=j(),a=w("label"),a.textContent="Clockwise",m=w("br"),y=w("input"),k=j(),C=w("button"),C.textContent="RESET",g(s,"type","number"),g(s,"class","svelte-14sxoso"),g(o,"type","number"),g(o,"class","svelte-14sxoso"),g(d,"type","number"),g(d,"class","svelte-14sxoso"),g(r,"type","number"),g(r,"class","svelte-14sxoso"),g(a,"for","order"),g(y,"id","order"),g(y,"type","checkbox"),g(y,"class","svelte-14sxoso"),g(C,"class","w3-button w3-padding-small w3-light-grey w3-medium"),$(t,"display","flex"),$(t,"flex-direction","column"),$(t,"width","20%"),$(t,"margin","auto"),$(t,"padding","20px")},m(h,M){T(h,t,M),p(t,i),p(t,s),q(s,e[0].players),p(t,n),p(t,o),q(o,e[0].basetime),p(t,l),p(t,d),q(d,e[0].bronstein),p(t,_),p(t,r),q(r,e[0].fischer),p(t,v),p(t,a),p(t,m),p(t,y),y.checked=e[0].ordered,p(t,k),p(t,C),N||(A=[B(s,"input",e[11]),B(o,"input",e[12]),B(d,"input",e[13]),B(r,"input",e[14]),B(y,"change",e[15]),B(C,"click",e[9])],N=!0)},p(h,M){M&1&&D(s.value)!==h[0].players&&q(s,h[0].players),M&1&&D(o.value)!==h[0].basetime&&q(o,h[0].basetime),M&1&&D(d.value)!==h[0].bronstein&&q(d,h[0].bronstein),M&1&&D(r.value)!==h[0].fischer&&q(r,h[0].fischer),M&1&&(y.checked=h[0].ordered)},d(h){h&&L(t),N=!1,F(A)}}}function Re(e){let t;return{c(){t=I("\u23F8\uFE0E")},m(i,s){T(i,t,s)},d(i){i&&L(t)}}}function Ge(e){let t;return{c(){t=I("\u23F5\uFE0E")},m(i,s){T(i,t,s)},d(i){i&&L(t)}}}function ve(e){let t,i,s,n=e[23],o,l;const d=()=>e[16](s,n),_=()=>e[16](null,n);function r(){return e[17](e[23])}let v={id:e[23],config:e[0],editable:e[2]};return s=new Ke({props:v}),d(),s.$on("click",r),{c(){t=w("div"),i=w("div"),Se(s.$$.fragment),o=j(),g(i,"class","w3-sand w3-border w3-padding w3-margin w3-round-large"),g(t,"class","watch svelte-14sxoso")},m(a,m){T(a,t,m),p(t,i),re(s,i,null),p(t,o),l=!0},p(a,m){e=a,n!==e[23]&&(_(),n=e[23],d());const y={};m&16&&(y.id=e[23]),m&1&&(y.config=e[0]),m&4&&(y.editable=e[2]),s.$set(y)},i(a){l||(R(s.$$.fragment,a),l=!0)},o(a){Y(s.$$.fragment,a),l=!1},d(a){a&&L(t),_(),oe(s)}}}function Qe(e){let t,i,s,n,o,l,d,_,r,v,a,m,y,k,C,N,A,h=e[2]&&be(e);function M(f,u){return f[1]?Ge:Re}let z=M(e),O=z(e),S=e[4],c=[];for(let f=0;f<S.length;f+=1)c[f]=ve(me(e,S,f));const E=f=>Y(c[f],1,1,()=>{c[f]=null});return{c(){t=w("link"),i=j(),s=w("div"),n=w("div"),o=I("Settings "),l=w("input"),d=w("br"),_=j(),h&&h.c(),r=j(),v=w("button"),v.textContent="\u23EA\uFE0E",a=j(),m=w("button"),O.c(),y=j(),k=w("div");for(let f=0;f<c.length;f+=1)c[f].c();g(t,"rel","stylesheet"),g(t,"href","https://www.w3schools.com/w3css/4/w3.css"),g(l,"type","checkbox"),g(l,"class","svelte-14sxoso"),g(v,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),g(m,"class","w3-button w3-padding-large w3-light-grey w3-xxlarge"),g(m,"style",""),g(n,"class",""),$(k,"position","absolute"),$(k,"width","100%"),$(k,"left","0"),$(k,"display","flex"),$(k,"flex-flow","row wrap"),$(k,"justify-content","center"),$(s,"position","absolute"),$(s,"width","100%"),$(s,"height","100%"),$(s,"left","0"),$(s,"top","0")},m(f,u){T(f,t,u),T(f,i,u),T(f,s,u),p(s,n),p(n,o),p(n,l),l.checked=e[2],p(n,d),p(n,_),h&&h.m(n,null),p(n,r),p(n,v),p(n,a),p(n,m),O.m(m,null),p(s,y),p(s,k);for(let b=0;b<c.length;b+=1)c[b].m(k,null);C=!0,N||(A=[B(l,"change",e[10]),B(v,"click",e[6]),B(m,"click",e[8])],N=!0)},p(f,[u]){if(u&4&&(l.checked=f[2]),f[2]?h?h.p(f,u):(h=be(f),h.c(),h.m(n,r)):h&&(h.d(1),h=null),z!==(z=M(f))&&(O.d(1),O=z(f),O&&(O.c(),O.m(m,null))),u&157){S=f[4];let b;for(b=0;b<S.length;b+=1){const fe=me(f,S,b);c[b]?(c[b].p(fe,u),R(c[b],1)):(c[b]=ve(fe),c[b].c(),R(c[b],1),c[b].m(k,null))}for(Ie(),b=S.length;b<c.length;b+=1)E(b);qe()}},i(f){if(!C){for(let u=0;u<S.length;u+=1)R(c[u]);C=!0}},o(f){c=c.filter(Boolean);for(let u=0;u<c.length;u+=1)Y(c[u]);C=!1},d(f){f&&L(t),f&&L(i),f&&L(s),h&&h.d(),O.d(),Ae(c,f),N=!1,F(A)}}}function Ue(e,t,i){let s,n,o=!1,l=[],d=[],_=[0,1,4,2,3];const r=[[0],[1,0],[1,2,0],[1,3,0,2],[1,3,0,4,2],[1,3,0,5,2,4],[1,3,0,5,2,6,4],[1,3,0,5,2,7,4,6]];let a=Ce("config",{players:4,bronstein:5,fischer:5,basetime:10,ordered:!0});$e(e,a,u=>i(0,s=u));function m(){if(d.length==0)return;let u=d.pop();for(let b in u)l[b].setstate(u[b])}function y(){return l.slice(0,s.players)}function k(u){if(!o)if(A(),y().every(b=>b.isrunning()==!1))l[u].start(),i(1,n=void 0);else if(s.ordered&&l[u].isrunning()){l[u].stop();let b=r[s.players-1][u];l[b].start()}else if(!s.ordered&&!l[u].isrunning()){for(let b in _)l[b].isrunning()&&l[b].stop();l[u].start()}else!s.ordered&&l[u].isrunning()&&l[u].stop()}function C(){if(A(),n===void 0)for(let u in _)l[u].isrunning()&&i(1,n=u),l[u].pause();else y().every(u=>!u.isrunning())&&l[n].unpause(),i(1,n=void 0)}function N(){A();for(let u in _)l[u].reset();i(1,n=void 0)}function A(){d.push(structuredClone(y().map(u=>u.getstate())))}function h(){o=this.checked,i(2,o)}function M(){s.players=D(this.value),a.set(s)}function z(){s.basetime=D(this.value),a.set(s)}function O(){s.bronstein=D(this.value),a.set(s)}function S(){s.fischer=D(this.value),a.set(s)}function c(){s.ordered=this.checked,a.set(s)}function E(u,b){ne[u?"unshift":"push"](()=>{l[b]=u,i(3,l)})}const f=u=>k(u);return e.$$.update=()=>{e.$$.dirty&1&&i(4,_=[...Array(s.players).keys()])},[s,n,o,l,_,a,m,k,C,N,h,M,z,O,S,c,E,f]}class We extends ce{constructor(t){super(),ue(this,t,Ue,Qe,Z,{})}}function Xe(e){let t,i,s,n,o;return n=new We({}),{c(){t=w("meta"),i=j(),s=w("main"),Se(n.$$.fragment),g(t,"name","viewport"),g(t,"content","width=device-width, initial-scale=1")},m(l,d){T(l,t,d),T(l,i,d),T(l,s,d),re(n,s,null),o=!0},p:H,i(l){o||(R(n.$$.fragment,l),o=!0)},o(l){Y(n.$$.fragment,l),o=!1},d(l){l&&L(t),l&&L(i),l&&L(s),oe(n)}}}class Ye extends ce{constructor(t){super(),ue(this,t,null,Xe,Z,{})}}new Ye({target:document.getElementById("app")});
